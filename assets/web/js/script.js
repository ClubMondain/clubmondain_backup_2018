// JavaScript Document
//Carosal
$(window).load(function() {
	$("#flexiselDemo3").flexisel({
		visibleItems: 6,
		animationSpeed: 1000,
		autoPlay: false,
		autoPlaySpeed: 2000,            
		pauseOnHover: false,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			landscape: { 
				changePoint:560,
				visibleItems: 1
			},
			tablet: { 
				changePoint:767,
				visibleItems: 2
			},
			tablet2: { 
				changePoint:991,
				visibleItems: 3
			},
			tablet3: { 
				changePoint:1200,
				visibleItems: 4
			}
		}
	});    
});

//Carosal
$(window).load(function() {
	$("#related-product-slide").flexisel({
		visibleItems: 3,
		animationSpeed: 1000,
		autoPlay: false,
		autoPlaySpeed: 2000,            
		pauseOnHover: false,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			landscape: { 
				changePoint:640,
				visibleItems: 1
			},
			tablet: { 
				changePoint:768,
				visibleItems: 2
			},
			tablet2: { 
				changePoint:992,
				visibleItems: 2
			}
		}
	});    
});

//Carosal
$(window).load(function() {
	$(".member-scroller").flexisel({
		visibleItems: 8,
		animationSpeed: 1000,
		autoPlay: true,
		autoPlaySpeed: 5000,            
		pauseOnHover: true,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			mobSm: { 
				changePoint:480,
				visibleItems: 2
			},
			mobLg: { 
				changePoint:640,
				visibleItems: 3
			},
			tabs: { 
				changePoint:768,
				visibleItems: 4
			},
			tablet: { 
				changePoint:991,
				visibleItems: 6
			},
			tablet2: { 
				changePoint:999,
				visibleItems: 4
			},
			tablet3: { 
				changePoint:1240,
				visibleItems: 6
			}
		}
	});    
});

//Carosal
$(window).load(function() {
	$(".member-scroller2").flexisel({
		visibleItems: 8,
		animationSpeed: 1000,
		autoPlay: true,
		autoPlaySpeed: 5000,            
		pauseOnHover: true,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			mobSm: { 
				changePoint:480,
				visibleItems: 2
			},
			mobLg: { 
				changePoint:640,
				visibleItems: 3
			},
			tabs: { 
				changePoint:768,
				visibleItems: 4
			},
			tablet: { 
				changePoint:991,
				visibleItems: 6
			},
			tablet2: { 
				changePoint:999,
				visibleItems: 4
			},
			tablet3: { 
				changePoint:1240,
				visibleItems: 6
			}
		}
	});    
});

//Carosal
$(window).load(function() {
	$(".scrolling-city").flexisel({
		visibleItems: 6,
		animationSpeed: 1000,
		autoPlay: true,
		controlNav: false,
		autoPlaySpeed: 5000,            
		pauseOnHover: true,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			mobSm: { 
				changePoint:480,
				visibleItems: 2
			},
			mobLg: { 
				changePoint:640,
				visibleItems: 2
			},
			tabs: { 
				changePoint:767,
				visibleItems: 3
			},
			tablet2: { 
				changePoint:991,
				visibleItems: 3
			},
			tablet3: { 
				changePoint:1199,
				visibleItems: 5
			}
		}
	});
});

//City Carosal
$(window).load(function() {
	$("#favourite-city").flexisel({
		visibleItems: 4,
		animationSpeed: 1000,
		autoPlay: true,
		controlNav: false,
		autoPlaySpeed: 10000,            
		pauseOnHover: true,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			mobSm: { 
				changePoint:480,
				visibleItems: 1
			},
			mobLg: { 
				changePoint:640,
				visibleItems: 2
			},
			tabs: { 
				changePoint:767,
				visibleItems: 3
			},
			tablet2: { 
				changePoint:991,
				visibleItems: 3
			},
			tablet3: { 
				changePoint:1199,
				visibleItems: 3
			}
		}
	});
});
//Event Carosal
$(window).load(function() {
	$("#favourite-event").flexisel({
		visibleItems: 4,
		animationSpeed: 1000,
		autoPlay: true,
		controlNav: false,
		autoPlaySpeed: 10000,            
		pauseOnHover: true,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			mobSm: { 
				changePoint:480,
				visibleItems: 1
			},
			mobLg: { 
				changePoint:640,
				visibleItems: 2
			},
			tabs: { 
				changePoint:767,
				visibleItems: 3
			},
			tablet2: { 
				changePoint:991,
				visibleItems: 3
			},
			tablet3: { 
				changePoint:1199,
				visibleItems: 3
			}
		}
	});
});
//Store Carosal
$(window).load(function() {
	$("#favourite-store").flexisel({
		visibleItems: 4,
		animationSpeed: 1000,
		autoPlay: true,
		controlNav: false,
		autoPlaySpeed: 10000,            
		pauseOnHover: true,
		enableResponsiveBreakpoints: true,
		responsiveBreakpoints: { 
			mobSm: { 
				changePoint:480,
				visibleItems: 1
			},
			mobLg: { 
				changePoint:640,
				visibleItems: 2
			},
			tabs: { 
				changePoint:767,
				visibleItems: 3
			},
			tablet2: { 
				changePoint:991,
				visibleItems: 3
			},
			tablet3: { 
				changePoint:1199,
				visibleItems: 3
			}
		}
	});
});

/*Seller Carousal*/
$(window).load(function() {
    $("#flexiselDemo2").flexisel({
        visibleItems: 5,
        animationSpeed: 500,
		infinite: false,
        autoPlay: false,
        autoPlaySpeed: 5000,
        pauseOnHover: true,
        enableResponsiveBreakpoints: true,
        responsiveBreakpoints: { 
            portrait3: { 
                changePoint:480,
                visibleItems: 2
            }, 
            portrait2: { 
                changePoint:640,
                visibleItems: 3
            }, 
            portrait: { 
                changePoint:768,
                visibleItems: 4
            }, 
            landscape: { 
                changePoint:991,
                visibleItems: 3
            },
            tablet: { 
                changePoint:1200,
                visibleItems: 4
            }
        }
    });

/*if($(window).width() > 991){	
	$("#img_01").elevateZoom({
		gallery:'gal1',
		cursor: 'pointer',
		galleryActiveClass: 'active',
		imageCrossfade: true,
	});	
	//pass the images to Fancybox
	$("#img_01").bind("click", function(e) {  
		var ez =   $('#img_01').data('elevateZoom');	
		$.fancybox(ez.getGalleryList());
		return false;
	});
}*/
	    
});

/*Tooltip*/
$(document).ready(function(){
    $('.tooltip-btn').tooltip({placement: "top"});   
});



/*LIST GRID TOGGLE*/
$(document).ready(function($){
    $("#grid-list-toggle").click(function(){
        if($(this).find("i").hasClass("fa-th")){
            $(this).find("i").removeClass("fa-th").addClass("fa-th-list");
        }else{
            $(this).find("i").removeClass("fa-th-list").addClass("fa-th");
        }
        if($("#city-container").hasClass("city-cont-list")){
            $("#city-container").removeClass("city-cont-list");
            $("#city-container").find(".col-cont").removeClass("col-xs-12");
            $("#city-container").find(".col-cont").addClass("col-lg-4").addClass("col-sm-6");
        }else{
            $("#city-container").addClass("city-cont-list");
            $("#city-container").find(".col-cont").removeClass("col-lg-4").removeClass("col-sm-6");
            $("#city-container").find(".col-cont").addClass("col-xs-12");
        }
        $(".s-sec").height("auto");
        $('.s-cont').each(function(){
           // Cache the highest
           var highestBox = 0;
           // Select and loop the elements you want to equalise
           $('.s-sec', this).each(function(){
               // If this box is higher than the cached highest then store it
               if($(this).height() > highestBox) {
                   highestBox = $(this).height();
               }
           });
           // Set the height of all those children to whichever was highest
           if( $(window).width() >= 992 ) {
               $('.s-sec',this).height(highestBox);
           } else {
               $('.s-sec',this).css( "height" , "auto");
           }
        });
    });
}($));

/*City Search Results*/
$(document).ready(function(){
$("#single-city-map").parents(".map-cont").css( "min-height" , $("#single-city-map").height());
if($(window).width() > 1199 && $(".city-cont").height() > 240){
	$("#city-search").addClass("absolute-sec");
	$("#single-city-map").addClass("absolute-sec");
	var headerHeight = $("header").outerHeight();
	var footerHeight = $("footer").outerHeight();
	var cityHeight = $("#city-search").outerHeight();
	var mapHeight = $("#single-city-map").outerHeight();
	$("#city-search").parent(".city-container").css("padding-top", cityHeight);
	$("#city-search").outerWidth($(".city-container").width());
	$("#single-city-map").outerWidth($(".map-cont").width());
	$(window).scroll(function() {
		var scrollTop = $(window).scrollTop();
		if(scrollTop > headerHeight + 10 && scrollTop < $(document).outerHeight() - footerHeight - cityHeight - 25){
			$("#city-search").addClass("fixed-sec");
		}else{
			$("#city-search").removeClass("fixed-sec");
		}
		if(scrollTop > $(document).outerHeight() - footerHeight - cityHeight - 25){
			$("#city-search").addClass("absolute-btm");
		}else{
			$("#city-search").removeClass("absolute-btm");
		}
		if(scrollTop > headerHeight + 10 && scrollTop < $(document).outerHeight() - footerHeight - cityHeight - 498){
			$("#single-city-map").addClass("fixed-sec");
		}else{
			$("#single-city-map").removeClass("fixed-sec");
		}
		if(scrollTop > $(document).outerHeight() - footerHeight - cityHeight - 500){
			$("#single-city-map").addClass("absolute-btm");
		}else{
			$("#single-city-map").removeClass("absolute-btm");
		}
	});
}
});

/*Bootstrap Collapse*/
$(document).ready(function($){
	$("body").click(function(){
		$("#profile-btn").collapse('hide');
	});
}($));

//Select Boxes
$(document).ready(function(e) {
	$(".select-box").select2();
});

/*same Height*/
$(document).ready(function(){
   // Select and loop the container element of the elements you want to equalise
   $('.s-cont').each(function(){       
     // Cache the highest
     var highestBox = 0;
     // Select and loop the elements you want to equalise
     $('.s-sec', this).each(function(){       
       // If this box is higher than the cached highest then store it
       if($(this).height() > highestBox) {
         highestBox = $(this).height(); 
       }     
     });             
     // Set the height of all those children to whichever was highest      
      if( $(window).width() >= 992 ) {
         $('.s-sec',this).height(highestBox);
      } else {
         $('.s-sec',this).css( "height" , "auto");
      }  
	  
     // Select and loop the elements you want to equalise
     $('.s-sec2', this).each(function(){       
       // If this box is higher than the cached highest then store it
       if($(this).height() > highestBox) {
         highestBox = $(this).height(); 
       }     
     });             
     // Set the height of all those children to whichever was highest      
      if( $(window).width() >= 768 ) {
         $('.s-sec2',this).height(highestBox);
      } else {
         $('.s-sec2',this).css( "height" , "auto");
      }                  
   });
});


//Login And Register Popup Section
$(document).ready(function($){
    $("#login-btn").click(function(){
        $("#register-popup").modal("hide").one('hidden.bs.modal', function () {            
        	$("#login-popup").modal("show");
    	});
    });
    $("#register-btn").click(function(){
        $("#login-popup").modal("hide").one('hidden.bs.modal', function () {            
        	$("#register-popup").modal("show");
    	});
    });
}($));
//Forget- password
$(document).ready(function($){
    $("#forget-btn").click(function(){
        $("#login-popup").modal("hide").one('hidden.bs.modal', function () {            
        	$("#forget-popup").modal("show");
    	});
    });
}($));	
//About Slider
$(document).ready(function(e) {
	$('.bx-slider').bxSlider({
	  pagerCustom: '#bx-pager',
	  nextText: '<i class="fa fa-angle-right"></i>',
	  prevText: '<i class="fa fa-angle-left"></i>',
	});
});

//Cities Slider
$(document).ready(function(e) {
	$('.cities-slider').bxSlider({
	  pagerCustom: '#bx-pager',
	  auto: true,
	  pause: 7000,
	  nextText: '<i class="fa fa-angle-right"></i>',
	  prevText: '<i class="fa fa-angle-left"></i>',
	});
});

$(document).ready(function(e) {
    $('.page-tab-links a').on('shown.bs.tab', function(){        
		slider.reloadSlider();
    });
});

//Dashboard
$(document).ready(function($) {
//Dashboard Same Height
var dashboardSidebarHeight = $(".dashboard-sidebar").height();
var dashboardMeetHeight = $(".dashboard-main > .right").height();

if($(window).width() > 767 && dashboardSidebarHeight < dashboardMeetHeight ){
	$(".dashboard-main > .left").css("min-height" , dashboardMeetHeight);
}else{
if($(window).width() > 767 && dashboardMeetHeight < dashboardSidebarHeight ){
	$(".dashboard-main > .left").css("min-height" , dashboardSidebarHeight);
}
}
	
//Dashboard Toggle
$("#dashboard-toggle").click(function(e) {
	$("#dashboard-main").toggleClass("show-sidebar");
});
	
}($));


/*Quantity Toogle*/
$('.btn-number').click(function(e){
    e.preventDefault();
    
    fieldName = $(this).attr('data-field');
    type      = $(this).attr('data-type');
    var input = $("input[name='"+fieldName+"']");
    var currentVal = parseInt(input.val());
    if (!isNaN(currentVal)) {
        if(type == 'minus') {
            
            if(currentVal > input.attr('min')) {
                input.val(currentVal - 1).change();
            } 
            if(parseInt(input.val()) == input.attr('min')) {
                $(this).attr('disabled', true);
            }

        } else if(type == 'plus') {

            if(currentVal < input.attr('max')) {
                input.val(currentVal + 1).change();
            }
            if(parseInt(input.val()) == input.attr('max')) {
                $(this).attr('disabled', true);
            }

        }
    } else {
        input.val(0);
    }
});
$('.input-number').focusin(function(){
   $(this).data('oldValue', $(this).val());
});
$('.input-number').change(function() {
    
    minValue =  parseInt($(this).attr('min'));
    maxValue =  parseInt($(this).attr('max'));
    valueCurrent = parseInt($(this).val());
    
    name = $(this).attr('name');
    if(valueCurrent >= minValue) {
        $(".btn-number[data-type='minus'][data-field='"+name+"']").removeAttr('disabled')
    } else {
        alert('Sorry, the minimum value was reached');
        $(this).val($(this).data('oldValue'));
    }
    if(valueCurrent <= maxValue) {
        $(".btn-number[data-type='plus'][data-field='"+name+"']").removeAttr('disabled')
    } else {
        alert('Sorry, the maximum value was reached');
        $(this).val($(this).data('oldValue'));
    }
    
    
});


$(".input-number").keydown(function (e) {
	// Allow: backspace, delete, tab, escape, enter and .
	if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
		 // Allow: Ctrl+A
		(e.keyCode == 65 && e.ctrlKey === true) || 
		 // Allow: home, end, left, right
		(e.keyCode >= 35 && e.keyCode <= 39)) {
			 // let it happen, don't do anything
			 return;
	}
	// Ensure that it is a number and stop the keypress
	if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
		e.preventDefault();
	}
});

/*Date*/
var numDays = {
                '1': 31, '2': 28, '3': 31, '4': 30, '5': 31, '6': 30,
                '7': 31, '8': 31, '9': 30, '10': 31, '11': 30, '12': 31
              };

function setDays(oMonthSel, oDaysSel, oYearSel)
{
	var nDays, oDaysSelLgth, opt, i = 1;
	nDays = numDays[oMonthSel[oMonthSel.selectedIndex].value];
	if (nDays == 28 && oYearSel[oYearSel.selectedIndex].value % 4 == 0)
		++nDays;
	oDaysSelLgth = oDaysSel.length;
	if (nDays != oDaysSelLgth)
	{
		if (nDays < oDaysSelLgth)
			oDaysSel.length = nDays;
		else for (i; i < nDays - oDaysSelLgth + 1; i++)
		{
			opt = new Option(oDaysSelLgth + i, oDaysSelLgth + i);
                  	oDaysSel.options[oDaysSel.length] = opt;
		}
	}
	var oForm = oMonthSel.form;
	var month = oMonthSel.options[oMonthSel.selectedIndex].value;
	var day = oDaysSel.options[oDaysSel.selectedIndex].value;
	var year = oYearSel.options[oYearSel.selectedIndex].value;	
	oForm.hidden.value = month + '/' + day + '/' + year;
}
/////////////////////////////////// 08-04-17 ///////////////////////////////////////////////////////////
//Login And Register Popup Section
$(document).ready(function($){
    $("#login-btn-pop").click(function(){
        $("#no-login-popup").modal("hide").one('hidden.bs.modal', function () {            
        	$("#login-popup").modal("show");
    	});
    });
    $("#register-btn-pop").click(function(){
        $("#no-login-popup").modal("hide").one('hidden.bs.modal', function () {            
        	$("#register-popup").modal("show");
    	});
    });
}($));
/***********************************Ratting Calculation On Store Page*************************************/
	$(document).ready(function(e) {
		$(".rating-star li").mouseover(function(e) {
			var rateIndex = $(this).index();
			var rateParent = $(this).parents(".rating-star");
			var rateParentChild = $(this).parents(".rating-star").children("li");
			
			$( rateParentChild ).removeClass("active");
			$( rateParentChild ).removeClass("active");																
			for( var i = 0 ; i < rateIndex + 2 ; i++ ) {
				$( rateParent.children("li:nth-child(" + i + ")") ).addClass("active");
			}																
		})
		.mouseout(function() {
			var ratingChecked = $(this).parents(".rating-star").find( "input:checked" ).parents("li").index();
			var rateParent = $(this).parents(".rating-star");
			var rateParentChild = $(this).parents(".rating-star").children("li");
			console.log(ratingChecked)
			$( rateParentChild ).removeClass("active");
			for( var i = 0 ; i < ratingChecked + 2 ; i++ ) {
				$( rateParent.children("li:nth-child(" + i + ")") ).addClass("active");
			}
		});
	});
	$(document).ready(function(e) {
		$(".rating-star").each(function(){
            var checkedNett = $(this).find( "input:checked" ).parents("li").index();
			for( var i = 0 ; i < checkedNett + 2 ; i++ ) {
				$( $(this).children("li:nth-child(" + i + ")") ).addClass("active");
			}
        });				   
	});